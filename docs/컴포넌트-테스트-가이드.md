# 공통 컴포넌트 테스트 및 개선 가이드

> **실용적 접근**: 공식적인 단위 테스트 대신 실제 사용 맥락에서 테스트

---

## 1. 개발 서버 실행

### 전체 실행 (권장)
```bash
npm run dev:all
```
- 프론트엔드: `http://localhost:5173`
- 백엔드: `http://localhost:3000`
- Vite가 자동으로 `/api` 요청을 백엔드로 프록시

### 개별 실행
```bash
# 프론트엔드만
npm run dev

# 백엔드만
npm run dev:server
```

---

## 2. 컴포넌트 테스트 절차

### Step 1: 컴포넌트 개발
1. `src/components/` 폴더에 컴포넌트 생성
2. 기본 기능 구현
3. TypeScript 타입 정의

### Step 2: 실제 페이지에 적용
1. 기존 페이지(예: `Employees.tsx`)에 컴포넌트 import
2. 기존 코드를 새 컴포넌트로 교체
3. 필요한 props 전달

### Step 3: 브라우저에서 테스트
1. 개발 서버 실행 (`npm run dev:all`)
2. 브라우저에서 해당 페이지 접속
3. 기능별로 체크리스트 확인

---

## 3. 기능별 체크리스트

### Modal 컴포넌트 체크리스트

#### 기본 기능
- [ ] 모달이 정상적으로 열림
- [ ] 모달이 정상적으로 닫힘
- [ ] 제목과 부제목이 표시됨
- [ ] 본문 내용이 표시됨
- [ ] 푸터 버튼이 표시됨

#### 사용자 경험
- [ ] ESC 키로 모달 닫기
- [ ] 오버레이(배경) 클릭으로 모달 닫기
- [ ] 모달 열릴 때 배경 스크롤 방지
- [ ] 모달 닫힐 때 배경 스크롤 복원

#### 반응형
- [ ] 데스크톱에서 정상 작동
- [ ] 태블릿에서 정상 작동
- [ ] 모바일에서 정상 작동
- [ ] 다양한 화면 크기에서 레이아웃 깨짐 없음

#### 크기 옵션
- [ ] `size="sm"` 작동 확인
- [ ] `size="md"` 작동 확인
- [ ] `size="lg"` 작동 확인
- [ ] `size="xl"` 작동 확인
- [ ] `size="full"` 작동 확인

#### 에지 케이스
- [ ] 긴 제목이 잘리지 않음
- [ ] 긴 본문 내용이 스크롤 가능
- [ ] 여러 모달이 동시에 열리지 않음
- [ ] 빠르게 열고 닫아도 오류 없음

---

### FilterBar 컴포넌트 체크리스트

#### 기본 기능
- [ ] 필터 옵션이 정상 표시됨
- [ ] 필터 선택 시 값이 변경됨
- [ ] 검색 입력이 정상 작동
- [ ] 검색 버튼 클릭 시 검색 실행

#### 상태 관리
- [ ] 필터 변경 시 첫 페이지로 이동
- [ ] 필터 값이 URL 파라미터와 동기화
- [ ] 페이지 새로고침 시 필터 유지

#### UI/UX
- [ ] 필터 레이블이 명확함
- [ ] 필터 간격이 적절함
- [ ] 모바일에서 필터가 세로로 배치됨

---

### DataTable 컴포넌트 체크리스트

#### 기본 기능
- [ ] 테이블 헤더가 표시됨
- [ ] 데이터 행이 정상 표시됨
- [ ] 빈 데이터 시 메시지 표시

#### 정렬
- [ ] 컬럼 헤더 클릭 시 정렬 작동
- [ ] 정렬 방향 표시 (↑↓)
- [ ] 여러 컬럼 정렬 지원

#### 페이지네이션
- [ ] 페이지 번호 표시
- [ ] 이전/다음 버튼 작동
- [ ] 페이지 크기 변경 작동
- [ ] 전체 개수 표시

#### 반응형
- [ ] 데스크톱: 테이블 뷰
- [ ] 모바일: 카드 뷰
- [ ] 화면 크기에 따라 자동 전환

---

## 4. 문제 발견 시 개선 프로세스

### Step 1: 문제 확인
1. 브라우저 개발자 도구 열기 (F12)
2. Console 탭에서 에러 확인
3. Network 탭에서 API 요청 확인
4. Elements 탭에서 DOM 구조 확인

### Step 2: 문제 분석
1. **에러 메시지 확인**
   - TypeScript 컴파일 에러
   - 런타임 JavaScript 에러
   - API 응답 에러

2. **원인 파악**
   - props 타입 불일치
   - 상태 관리 문제
   - CSS 스타일 문제
   - 이벤트 핸들링 문제

### Step 3: 수정
1. 컴포넌트 파일 수정
2. Vite HMR로 자동 새로고침 확인
3. 브라우저에서 다시 테스트

### Step 4: 검증
1. 체크리스트 다시 확인
2. 다른 브라우저에서도 테스트 (Chrome, Firefox, Safari)
3. 다른 페이지에도 적용해보기

---

## 5. 개선 사항 기록

### 발견한 문제 기록
```markdown
## 발견한 문제
- 날짜: 2026-01-07
- 컴포넌트: Modal
- 문제: ESC 키로 닫을 때 body 스크롤이 복원되지 않음
- 해결: useEffect cleanup 함수에 스크롤 복원 로직 추가
```

### 개선 아이디어 기록
```markdown
## 개선 아이디어
- 컴포넌트: Modal
- 아이디어: 애니메이션 추가 (fade in/out)
- 우선순위: 낮음 (나중에 개선)
```

---

## 6. 실제 테스트 예시

### Modal 컴포넌트 테스트 시나리오

1. **기본 테스트**
   ```
   1. Employees 페이지 접속
   2. "수정" 버튼 클릭
   3. 모달이 열리는지 확인
   4. "닫기" 버튼 클릭
   5. 모달이 닫히는지 확인
   ```

2. **키보드 테스트**
   ```
   1. 모달 열기
   2. ESC 키 누르기
   3. 모달이 닫히는지 확인
   ```

3. **오버레이 테스트**
   ```
   1. 모달 열기
   2. 모달 외부(배경) 클릭
   3. 모달이 닫히는지 확인
   ```

4. **반응형 테스트**
   ```
   1. 브라우저 개발자 도구 열기
   2. 디바이스 모드 활성화
   3. 다양한 화면 크기로 테스트
   ```

---

## 7. 빠른 체크 명령어

### 개발 서버 실행
```bash
npm run dev:all
```

### 빌드 확인
```bash
npm run build
```

### 타입 체크
```bash
npx tsc --noEmit
```

### 린트 체크
```bash
npm run lint
```

---

## 8. 팁

### 효율적인 테스트
1. **한 번에 하나씩**: 여러 기능을 동시에 테스트하지 말고 하나씩 확인
2. **체크리스트 활용**: 빠뜨리지 않도록 체크리스트 사용
3. **에러 메시지 읽기**: 브라우저 콘솔의 에러 메시지를 자세히 읽기
4. **다른 페이지에도 적용**: 한 페이지에서만 테스트하지 말고 다른 페이지에도 적용해보기

### 문제 해결
1. **Vite HMR 활용**: 파일 저장 시 자동 새로고침되므로 빠르게 반복 테스트 가능
2. **브라우저 캐시 클리어**: 문제가 계속되면 브라우저 캐시 클리어 (Ctrl+Shift+R)
3. **타입 에러 확인**: TypeScript 에러는 컴파일 시점에 확인 가능

---

## 9. 다음 단계

컴포넌트가 안정화되면:
1. 다른 페이지에도 적용
2. 추가 기능 요구사항 반영
3. 성능 최적화 (필요 시)
4. 접근성 개선 (필요 시)

