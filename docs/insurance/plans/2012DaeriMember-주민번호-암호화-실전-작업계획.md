# 2012DaeriMember ì£¼ë¯¼ë²ˆí˜¸ ì•”í˜¸í™” ì‹¤ì „ ì‘ì—… ê³„íš

**ì‘ì„±ì¼**: 2026-01-17  
**ëª©ì **: ì‹¤ì œ ì‘ì—… íë¦„ì— ë§ì¶˜ ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš  
**í˜„ì¬ ìƒíƒœ**: ìƒˆ í…Œì´ë¸” ìƒì„± ì™„ë£Œ, ë§ˆì´ê·¸ë ˆì´ì…˜ ë° API ìˆ˜ì • í•„ìš”

---

## ğŸ“‹ í˜„ì¬ ìƒí™© ìš”ì•½

### âœ… ì™„ë£Œëœ ì‘ì—…
1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (`.env` íŒŒì¼, `JUMIN_ENCRYPTION_KEY`)
2. ë³´ì•ˆ ëª¨ë“ˆ ê°œë°œ (`pci0327/api/utils/jumin-secure.php`)
3. ìƒˆ í…Œì´ë¸” ìƒì„± (`2012DaeriMemberSecure`)

### ğŸ”„ ì§„í–‰ ì¤‘ì¸ ì‘ì—…
- ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- API ìˆ˜ì • ì‘ì—…

---

## ğŸ¯ í•µì‹¬ êµ¬ì¡° ì´í•´

### 1. í”„ë¡ íŠ¸ì—”ë“œ â†’ ë°±ì—”ë“œ â†’ PHP API íë¦„

```
í”„ë¡ íŠ¸ì—”ë“œ (React)
â””â”€ disk-cms-react/src/pages/insurance/DriverSearch.tsx
   â””â”€ GET /api/insurance/kj-driver/list?name=&jumin=&status=&page=&limit=
      â”‚
      â–¼
ë°±ì—”ë“œ í”„ë¡ì‹œ (Express)
â””â”€ disk-cms-react/routes/insurance/kj-driver-search.js
   â””â”€ https://pcikorea.com/api/insurance/kj-driver-list.php í˜¸ì¶œ
      â”‚
      â–¼
ì‹¤ì œ PHP API (í•µì‹¬ ìˆ˜ì • ëŒ€ìƒ!)
â””â”€ pci0327/api/insurance/kj-driver-list.php
   â””â”€ 2012DaeriMember í…Œì´ë¸” ì¡°íšŒ (í˜„ì¬)
   â””â”€ 2012DaeriMemberSecure í…Œì´ë¸” ì¡°íšŒ (ë³€ê²½ í›„)
```

### 2. í˜„ì¬ API ë™ì‘ ë¶„ì„

**íŒŒì¼**: `pci0327/api/insurance/kj-driver-list.php`

#### A. ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ (42-44ì¤„)
```php
// í˜„ì¬: LIKE ë¶€ë¶„ ê²€ìƒ‰
if ($jumin !== '') {
    $where[] = 'm.`Jumin` LIKE :jumin';
    $params[':jumin'] = '%' . $jumin . '%';
}
```
- **ë¬¸ì œì **: ë¶€ë¶„ ê²€ìƒ‰ ê°€ëŠ¥ (ì˜ˆ: "123456"ë§Œ ì…ë ¥í•´ë„ ê²€ìƒ‰ë¨)
- **ë³€ê²½ í•„ìš”**: í•´ì‹œ ê¸°ë°˜ ì •í™• ì¼ì¹˜ ê²€ìƒ‰ (13ìë¦¬ í•„ìˆ˜)

#### B. ì£¼ë¯¼ë²ˆí˜¸ ë°˜í™˜ (78ì¤„)
```php
// í˜„ì¬: í‰ë¬¸ ì£¼ë¯¼ë²ˆí˜¸ ê·¸ëŒ€ë¡œ ë°˜í™˜
SELECT m.`Jumin`, ...
FROM `2012DaeriMember` AS m
```
- **ë¬¸ì œì **: í‰ë¬¸ ì£¼ë¯¼ë²ˆí˜¸ ë…¸ì¶œ
- **ë³€ê²½ í•„ìš”**: ë³µí˜¸í™” í›„ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬

#### C. 2019rate í…Œì´ë¸” ì¡°íšŒ (122ì¤„, 261-268ì¤„)
```php
// í˜„ì¬: í‰ë¬¸ ì£¼ë¯¼ë²ˆí˜¸ë¡œ ì¡°íšŒ
$rateStmt = $pdo->prepare("
    SELECT `rate` 
    FROM `2019rate` 
    WHERE `policy` = :policy AND `jumin` = :jumin
");

if ($policyNum && $row['Jumin']) {
    $rateStmt->execute([
        ':policy' => $policyNum,
        ':jumin'  => $row['Jumin'],  // í‰ë¬¸
    ]);
}
```
- **ë¬¸ì œì **: í‰ë¬¸ ì£¼ë¯¼ë²ˆí˜¸ë¡œ ì¡°íšŒ
- **ë³€ê²½ í•„ìš”**: ë³µí˜¸í™”ëœ ì£¼ë¯¼ë²ˆí˜¸ë¡œ ì¡°íšŒ

---

## ğŸš€ ì‘ì—… ë‹¨ê³„ (ìš°ì„ ìˆœìœ„ ìˆœ)

### Phase 1: ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± ë° ì‹¤í–‰ â­ (ìµœìš°ì„ )

**ëª©í‘œ**: ê¸°ì¡´ ë°ì´í„°ë¥¼ ìƒˆ í…Œì´ë¸”ë¡œ ë³µì‚¬

#### 1.1 ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±

**íŒŒì¼ ìœ„ì¹˜**: `pci0327/scripts/migrate-to-secure-table.php` (ê¸°íšì„œ 714ì¤„ ì°¸ì¡°)

**ì£¼ìš” ê¸°ëŠ¥**:
- `2012DaeriMember` â†’ `2012DaeriMemberSecure` ë°ì´í„° ë³µì‚¬
- ì£¼ë¯¼ë²ˆí˜¸ ì•”í˜¸í™” (`jumin_encrypted`)
- í•´ì‹œ ìƒì„± (`jumin_hash`)
- ë°°ì¹˜ ì²˜ë¦¬ (1000ê±´ì”©)
- ì—ëŸ¬ ì²˜ë¦¬ ë° ë¡¤ë°±

**ì‹¤í–‰ ë°©ë²•**:
```bash
# Dry-run (í…ŒìŠ¤íŠ¸ ì‹¤í–‰)
php migrate-to-secure-table.php --dry-run

# ì‹¤ì œ ì‹¤í–‰
php migrate-to-secure-table.php
```

#### 1.2 ë°ì´í„° ê²€ì¦

**ê²€ì¦ í•­ëª©**:
- [ ] ì´ ë ˆì½”ë“œ ìˆ˜ í™•ì¸
- [ ] ì•”í˜¸í™”ëœ ì£¼ë¯¼ë²ˆí˜¸ í™•ì¸
- [ ] í•´ì‹œ ê°’ í™•ì¸
- [ ] ê¸°íƒ€ í•„ë“œ ì •ìƒ ë³µì‚¬ í™•ì¸

---

### Phase 2: kj-driver-list.php API ìˆ˜ì • â­â­

**íŒŒì¼**: `pci0327/api/insurance/kj-driver-list.php`

#### 2.1 ë³´ì•ˆ ëª¨ë“ˆ ì¶”ê°€

**ìœ„ì¹˜**: íŒŒì¼ ìƒë‹¨ (18ì¤„ ì´í›„)

```php
require_once __DIR__ . '/../config/db_config.php';
require_once __DIR__ . '/../utils/jumin-secure.php';  // ì¶”ê°€
$pdo = getDbConnection();
```

#### 2.2 í…Œì´ë¸”ëª… ë³€ê²½

**ìœ„ì¹˜**: 63ì¤„, 96ì¤„

```php
// ë³€ê²½ ì „
FROM `2012DaeriMember` AS m

// ë³€ê²½ í›„
FROM `2012DaeriMemberSecure` AS m
```

#### 2.3 ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ ë°©ì‹ ë³€ê²½

**ìœ„ì¹˜**: 41-45ì¤„

**ë³€ê²½ ì „**:
```php
// ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ (ë¶€ë¶„ ê²€ìƒ‰ í—ˆìš©)
if ($jumin !== '') {
    $where[] = 'm.`Jumin` LIKE :jumin';
    $params[':jumin'] = '%' . $jumin . '%';
}
```

**ë³€ê²½ í›„**:
```php
// ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ (í•´ì‹œ ê¸°ë°˜ ì •í™• ì¼ì¹˜ ê²€ìƒ‰)
if ($jumin !== '') {
    $juminDigits = preg_replace('/[^0-9]/', '', $jumin);
    if (strlen($juminDigits) === 13) {
        $juminHash = hashJumin($juminDigits);
        $where[] = 'm.`jumin_hash` = :jumin_hash';
        $params[':jumin_hash'] = $juminHash;
    }
    // 13ìë¦¬ê°€ ì•„ë‹ˆë©´ ê²€ìƒ‰ ë¶ˆê°€ (ë³´ì•ˆìƒ ë¶€ë¶„ ê²€ìƒ‰ ë¶ˆê°€)
}
```

#### 2.4 SELECT ì ˆì—ì„œ ì£¼ë¯¼ë²ˆí˜¸ í•„ë“œ ì œê±°

**ìœ„ì¹˜**: 74-95ì¤„

**ë³€ê²½ ì „**:
```php
SELECT 
    m.`num`,
    m.`Name`,
    m.`Jumin`,  // ì œê±°
    m.`nai` AS age,
    ...
FROM `2012DaeriMemberSecure` AS m
```

**ë³€ê²½ í›„**:
```php
SELECT 
    m.`num`,
    m.`Name`,
    m.`jumin_encrypted`,  // ì„ì‹œë¡œ ê°€ì ¸ì˜´ (í›„ì²˜ë¦¬ìš©)
    m.`nai` AS age,
    ...
FROM `2012DaeriMemberSecure` AS m
```

**ì£¼ì˜**: `jumin_encrypted`ëŠ” í›„ì²˜ë¦¬ í›„ ì‘ë‹µì—ì„œ ì œê±°í•´ì•¼ í•¨

#### 2.5 ì¡°íšŒ í›„ ì£¼ë¯¼ë²ˆí˜¸ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬

**ìœ„ì¹˜**: 230-283ì¤„ (í›„ì²˜ë¦¬ ë£¨í”„ ë‚´ë¶€)

**ë³€ê²½ ì „**:
```php
foreach ($rows as &$row) {
    // ... ê¸°ì¡´ í›„ì²˜ë¦¬ ...
    // ì£¼ë¯¼ë²ˆí˜¸ëŠ” ê·¸ëŒ€ë¡œ ì‚¬ìš©
}
```

**ë³€ê²½ í›„**:
```php
foreach ($rows as &$row) {
    // ... ê¸°ì¡´ í›„ì²˜ë¦¬ ...
    
    // ì£¼ë¯¼ë²ˆí˜¸ ë³µí˜¸í™” ë° ë§ˆìŠ¤í‚¹ ì²˜ë¦¬
    if (!empty($row['jumin_encrypted'])) {
        $decryptedJumin = decryptJumin($row['jumin_encrypted']);
        $row['Jumin'] = maskJumin($decryptedJumin, false); // ë§ˆìŠ¤í‚¹ ì²˜ë¦¬
        
        // ë³´ì•ˆ í•„ë“œëŠ” ì‘ë‹µì—ì„œ ì œê±°
        unset($row['jumin_encrypted']);
        unset($row['jumin_hash']);
    } else {
        $row['Jumin'] = '';  // ì£¼ë¯¼ë²ˆí˜¸ê°€ ì—†ëŠ” ê²½ìš°
    }
}
unset($row);  // ì°¸ì¡° ì œê±°
```

#### 2.6 2019rate í…Œì´ë¸” ì¡°íšŒ ì‹œ ì£¼ë¯¼ë²ˆí˜¸ ë³µí˜¸í™”

**ìœ„ì¹˜**: 119-124ì¤„ (rateStmt ì¤€ë¹„), 261-268ì¤„ (ì‹¤í–‰)

**ë³€ê²½ ì „**:
```php
// rate ì½”ë“œ â†’ ê³„ìˆ˜/ì„¤ëª… ë§¤í•‘ í•¨ìˆ˜
$mapRate = function (?string $rateCode): array { ... };

// ...

// 5-4. ê°œì¸ ì†í•´ìœ¨ ì¡°íšŒ (2019rate)
if ($policyNum && $row['Jumin']) {
    $rateStmt->execute([
        ':policy' => $policyNum,
        ':jumin'  => $row['Jumin'],  // í‰ë¬¸
    ]);
}
```

**ë³€ê²½ í›„**:
```php
// rate ì½”ë“œ â†’ ê³„ìˆ˜/ì„¤ëª… ë§¤í•‘ í•¨ìˆ˜
$mapRate = function (?string $rateCode): array { ... };

// ...

// 5-4. ê°œì¸ ì†í•´ìœ¨ ì¡°íšŒ (2019rate)
// ì£¼ë¯¼ë²ˆí˜¸ëŠ” ì´ë¯¸ ë³µí˜¸í™”ë˜ì–´ ìˆê±°ë‚˜, ë³µí˜¸í™” í•„ìš”
if ($policyNum) {
    // jumin_encryptedì—ì„œ ë³µí˜¸í™” (ì•„ì§ ë§ˆìŠ¤í‚¹ ì „)
    $decryptedJumin = null;
    if (!empty($row['jumin_encrypted'])) {
        $decryptedJumin = decryptJumin($row['jumin_encrypted']);
    }
    
    if ($decryptedJumin) {
        $rateStmt->execute([
            ':policy' => $policyNum,
            ':jumin'  => $decryptedJumin,  // ë³µí˜¸í™”ëœ ì£¼ë¯¼ë²ˆí˜¸
        ]);
        $rateRow = $rateStmt->fetch(PDO::FETCH_ASSOC);
        $rateCode = $rateRow['rate'] ?? null;
        $personRate = $mapRate($rateCode);
    } else {
        $personRate = $mapRate(null);
    }
}
```

**ì£¼ì˜**: `2019rate` í…Œì´ë¸” ì¡°íšŒëŠ” ë§ˆìŠ¤í‚¹ ì „ì— ìˆ˜í–‰í•´ì•¼ í•¨ (í‰ë¬¸ ì£¼ë¯¼ë²ˆí˜¸ í•„ìš”)

---

### Phase 3: í”„ë¡ íŠ¸ì—”ë“œ ê²€ìƒ‰ UI ë³€ê²½

**íŒŒì¼**: `disk-cms-react/src/pages/insurance/DriverSearch.tsx`

#### 3.1 ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ ìœ íš¨ì„± ê²€ì¦ ê°•í™”

**ìœ„ì¹˜**: ê²€ìƒ‰ ì‹¤í–‰ í•¨ìˆ˜ ë‚´ë¶€ (110ì¤„ ê·¼ì²˜)

**ë³€ê²½ ì „**:
```typescript
if (filters.searchType === 'ì´ë¦„') {
    params.name = filters.search
} else {
    params.jumin = filters.search
}
```

**ë³€ê²½ í›„**:
```typescript
if (filters.searchType === 'ì´ë¦„') {
    params.name = filters.search
} else {
    // ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰: ì „ì²´ 13ìë¦¬ ì…ë ¥ ê°•ì œ
    const juminDigits = filters.search.replace(/[^0-9]/g, '')
    if (juminDigits.length !== 13) {
        toast.warning('ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ì€ ì „ì²´ 13ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”. (ì˜ˆ: 6603271234567)')
        return
    }
    params.jumin = juminDigits
}
```

#### 3.2 ê²€ìƒ‰ UI ì•ˆë‚´ ë¬¸êµ¬ ì¶”ê°€

**ìœ„ì¹˜**: ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ ì…ë ¥ í•„ë“œ ê·¼ì²˜

```typescript
// ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ ì‹œ ì•ˆë‚´ ë¬¸êµ¬ í‘œì‹œ
{filters.searchType === 'ì£¼ë¯¼ë²ˆí˜¸' && (
    <Text fontSize="sm" color="gray.500" mt={1}>
        ì „ì²´ 13ìë¦¬ ì£¼ë¯¼ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” (ì˜ˆ: 6603271234567)
    </Text>
)}
```

---

### Phase 4: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

#### 4.1 ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

- [ ] ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ ì •ìƒ ë™ì‘ í™•ì¸
- [ ] ì£¼ë¯¼ë²ˆí˜¸ ë§ˆìŠ¤í‚¹ ì •ìƒ í‘œì‹œ í™•ì¸
- [ ] 2019rate í…Œì´ë¸” ì¡°íšŒ ì •ìƒ ë™ì‘ í™•ì¸
- [ ] í˜ì´ì§• ì •ìƒ ë™ì‘ í™•ì¸
- [ ] ì´ë¦„ ê²€ìƒ‰ ì •ìƒ ë™ì‘ í™•ì¸

#### 4.2 ë³´ì•ˆ í…ŒìŠ¤íŠ¸

- [ ] API ì‘ë‹µì— í‰ë¬¸ ì£¼ë¯¼ë²ˆí˜¸ í¬í•¨ ì—¬ë¶€ í™•ì¸
- [ ] API ì‘ë‹µì— `jumin_encrypted`, `jumin_hash` í¬í•¨ ì—¬ë¶€ í™•ì¸
- [ ] ë¡œê·¸ì— ì£¼ë¯¼ë²ˆí˜¸ ë…¸ì¶œ ì—¬ë¶€ í™•ì¸

#### 4.3 ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

- [ ] ê²€ìƒ‰ ì„±ëŠ¥ ë¹„êµ (LIKE vs í•´ì‹œ)
- [ ] ë³µí˜¸í™” ì²˜ë¦¬ ì‹œê°„ ì¸¡ì •

---

## ğŸ“ ì‘ì—… ì²´í¬ë¦¬ìŠ¤íŠ¸

### Phase 1: ë§ˆì´ê·¸ë ˆì´ì…˜
- [ ] ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- [ ] Dry-run í…ŒìŠ¤íŠ¸
- [ ] ì‹¤ì œ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰
- [ ] ë°ì´í„° ê²€ì¦

### Phase 2: API ìˆ˜ì •
- [ ] ë³´ì•ˆ ëª¨ë“ˆ ì¶”ê°€
- [ ] í…Œì´ë¸”ëª… ë³€ê²½
- [ ] ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ ë°©ì‹ ë³€ê²½
- [ ] SELECT ì ˆ ìˆ˜ì •
- [ ] ì£¼ë¯¼ë²ˆí˜¸ ë§ˆìŠ¤í‚¹ ì²˜ë¦¬
- [ ] 2019rate ì¡°íšŒ ìˆ˜ì •

### Phase 3: í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì •
- [ ] ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ ìœ íš¨ì„± ê²€ì¦
- [ ] ì•ˆë‚´ ë¬¸êµ¬ ì¶”ê°€

### Phase 4: í…ŒìŠ¤íŠ¸
- [ ] ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] ë³´ì•ˆ í…ŒìŠ¤íŠ¸
- [ ] ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ì‘ì—… ìˆœì„œ ì¤‘ìš”!

**ë°˜ë“œì‹œ ìˆœì„œëŒ€ë¡œ ì§„í–‰**:
1. ë¨¼ì € ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (Phase 1)
2. ê·¸ ë‹¤ìŒ API ìˆ˜ì • (Phase 2)
3. ë§ˆì§€ë§‰ìœ¼ë¡œ í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì • (Phase 3)

**ì´ìœ **: API ìˆ˜ì • í›„ ìƒˆ í…Œì´ë¸”ì—ì„œ ë°ì´í„°ë¥¼ ì¡°íšŒí•´ì•¼ í•˜ë¯€ë¡œ, ë§ˆì´ê·¸ë ˆì´ì…˜ì´ ì™„ë£Œë˜ì–´ì•¼ í•¨

### 2. 2019rate í…Œì´ë¸” ì¡°íšŒ ì£¼ì˜

- `2019rate` í…Œì´ë¸”ì€ í‰ë¬¸ ì£¼ë¯¼ë²ˆí˜¸ë¡œ ì¡°íšŒí•¨
- ë”°ë¼ì„œ `jumin_encrypted`ë¥¼ ë³µí˜¸í™”í•´ì„œ ì‚¬ìš©í•´ì•¼ í•¨
- ë§ˆìŠ¤í‚¹ì€ `2019rate` ì¡°íšŒ **ì´í›„**ì— ìˆ˜í–‰

### 3. ì£¼ë¯¼ë²ˆí˜¸ ê²€ìƒ‰ ë°©ì‹ ë³€ê²½

- **ë³€ê²½ ì „**: LIKE ë¶€ë¶„ ê²€ìƒ‰ ê°€ëŠ¥ (ì˜ˆ: "123456"ë§Œ ì…ë ¥í•´ë„ ê²€ìƒ‰)
- **ë³€ê²½ í›„**: í•´ì‹œ ì •í™• ì¼ì¹˜ ê²€ìƒ‰ (13ìë¦¬ í•„ìˆ˜)
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ 13ìë¦¬ ì…ë ¥ ê°•ì œ í•„ìš”

### 4. ë¡¤ë°± ì¤€ë¹„

- API ìˆ˜ì • ì „ ë°±ì—… í•„ìˆ˜
- ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ ê¸°ì¡´ í…Œì´ë¸”ì€ ë°±ì—… ëª©ì ìœ¼ë¡œ ìœ ì§€
- ë¬¸ì œ ë°œìƒ ì‹œ ê¸°ì¡´ í…Œì´ë¸”ë¡œ ë¡¤ë°± ê°€ëŠ¥

---

## ğŸ” ì°¸ê³  íŒŒì¼ ìœ„ì¹˜

### PHP API íŒŒì¼
- **í•µì‹¬ ìˆ˜ì • ëŒ€ìƒ**: `pci0327/api/insurance/kj-driver-list.php`
- **ë³´ì•ˆ ëª¨ë“ˆ**: `pci0327/api/utils/jumin-secure.php`
- **ë§ˆì´ê·¸ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸**: `pci0327/scripts/migrate-to-secure-table.php`

### í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼
- **ê²€ìƒ‰ í˜ì´ì§€**: `disk-cms-react/src/pages/insurance/DriverSearch.tsx`
- **API í”„ë¡ì‹œ**: `disk-cms-react/routes/insurance/kj-driver-search.js`

### ë¬¸ì„œ
- **ê¸°íšì„œ**: `disk-cms-react/docs/insurance/plans/2012DaeriMember-Jumin-ì•”í˜¸í™”-ê¸°íš.md`
- **ì‘ì—… ì¬ê°œ ê°€ì´ë“œ**: `disk-cms-react/docs/insurance/plans/ì‘ì—…-ì¬ê°œ-ê°€ì´ë“œ.md`

---

## âœ… ë¹ ë¥¸ ì°¸ì¡°

### ì£¼ìš” í•¨ìˆ˜ (jumin-secure.php)

```php
// ì£¼ë¯¼ë²ˆí˜¸ ì•”í˜¸í™”
encryptJumin($jumin) â†’ string|null

// ì£¼ë¯¼ë²ˆí˜¸ ë³µí˜¸í™”
decryptJumin($encrypted) â†’ string|null

// í•´ì‹œ ìƒì„±
hashJumin($jumin) â†’ string

// ë§ˆìŠ¤í‚¹ ì²˜ë¦¬
maskJumin($jumin, $isEncrypted) â†’ string
// ì˜ˆ: "6603271234567" â†’ "660327-******"
```

### í…Œì´ë¸” êµ¬ì¡°

**ê¸°ì¡´ í…Œì´ë¸”**: `2012DaeriMember`
- `Jumin` varchar(15) - í‰ë¬¸ ì£¼ë¯¼ë²ˆí˜¸

**ìƒˆ í…Œì´ë¸”**: `2012DaeriMemberSecure`
- `jumin_encrypted` text - ì•”í˜¸í™”ëœ ì£¼ë¯¼ë²ˆí˜¸
- `jumin_hash` char(64) - ê²€ìƒ‰ìš© í•´ì‹œ (UNIQUE INDEX)

---

**ì‘ì„±ì¼**: 2026-01-17  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-01-17
